---
// src/components/Web3ContactForm.astro
import { Icon } from "astro-icon/components";
---

<form
  id="contact-form-container"
  action="https://api.web3forms.com/submit"
  method="POST"
>
  <input
    type="hidden"
    name="access_key"
    value="d26e944b-e198-429e-9d3e-f191f2589f9b"
  />
  <input type="hidden" name="subject" value="New Message!" />
  <input type="hidden" name="from_name" value="cjhosken.github.io" />
  <input type="hidden" name="redirect" value="https://web3forms.com/success" />
  <input type="checkbox" name="botcheck" style="display: none;" />

  <div id="contact-form">
    <h2>Get in Touch!</h2>

    <input type="text" name="name" placeholder="Your Name" required />

    <input
      type="email"
      id="email"
      name="Email"
      placeholder="your.email@example.com"
      required
    />

    <input
      type="text"
      id="subject"
      name="Subject"
      placeholder="Regarding..."
      required
    />

    <textarea
      id="message"
      name="message"
      placeholder="Your message here..."
      rows="5"
      required></textarea>

    <button type="submit"> Send Message </button>
  </div>

  <style is:global>
    #contact-form-container {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #contact-form {
      width: 50%;
      margin: 2rem 0rem 4rem 0rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 3rem 2rem;
      background-color: #131313;
      border-radius: 16px;
      box-shadow: inset 0px 0px 5rem rgba(0, 0, 0, 0.2);
    }

    #contact-form h2 {
      text-align: center;
      font-size: 3rem;
    }

    #contact-form input {
      font-size: 0.9rem;
      padding: 1.5em 1em;
      border-radius: 16px;
      border: none;
      margin: 1em 0em;
      background-color: #242424;
      border: solid #333 2px;
      width: 90%;
    }

    #contact-form input:focus {
      outline: none;
      border: solid var(--primary-color) 2px;
    }

    #contact-form button {
      width: 95%;
      padding: 1rem;
    }

    #contact-form textarea {
      font-size: 0.9rem;
      padding: 1.5em 1em;
      border-radius: 16px;
      border: none;
      margin: 1em 0em;
      background-color: #242424;
      border: solid #333 2px;
      min-height: 5rem;
      min-width: 90%;
      max-width: 90%;
    }

    #contact-form textarea:focus {
      outline: none;
      border: solid var(--primary-color) 2px;
    }

    #submit:hover {
      transform: scale(1.025);
    }
  </style>
  <script is:inline>
    document
      .querySelector(".contact-form")
      .addEventListener("submit", function (e) {
        // Get form values
        const email = document.getElementById("email").value;
        const subjectInput = document.getElementById("subject");

        // Set hidden fields
        document.querySelector('[name="from_name"]').value = email;
        document.querySelector('[name="subject"]').value = subjectInput.value;

        // Optional: Add loading state
        const button = document.querySelector(".submit-button");
        button.disabled = true;
        button.innerHTML = "Sending...";

        // If you want to keep using the fetch API instead of form submission:
        // e.preventDefault();
        // const formData = new FormData(e.target);
        // fetch(e.target.action, {
        //   method: 'POST',
        //   body: formData
        // }).then(...);
      });
  </script>
</form>
