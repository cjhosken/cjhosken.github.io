---

import { getCollection } from 'astro:content';
import BlogLayout from '../../layouts/BlogLayout.astro';


export async function getStaticPaths() {
  const posts = await getCollection('blog');
  
  return posts.map((post) => {
    // Keep the full slug as a string
    return {
      params: { slug: post.slug }, // Just pass the string
      props: { post },
    };
  });
}

export const prerender = true
const { post } = Astro.props;
const { Content } = await post.render();
---

<BlogLayout title={post.data.title} description={post.data.description}>
  <article class="blog-post">
    <header>
      <h1>{post.data.title}</h1>
      <p>{post.data.description}</p>
      <time datetime={new Date(post.data.date).toLocaleDateString("en-GB", {day: "2-digit", month: "2-digit", year:"numeric"})}>{new Date(post.data.date).toLocaleDateString('en-GB', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
      })}</time>
    </header>
    <!-- Pass both Astro and interactive components -->
    <Content components={{ 

    }} />
  </article>
</BlogLayout>
<style is:global>
  /* Base container */
  .blog-post {
    width: 95%;
    max-width: 900px;
    font-family: 'Georgia', 'Times New Roman', serif;
    color: white;
    line-height: 1.75;
    word-wrap: break-word;
  }

  /* Header */
  .blog-post header {
    margin-bottom: 3rem;
  }

  .blog-post h1 {
    font-size: clamp(2rem, 5vw, 2.8rem);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 0.75rem;
    letter-spacing: -0.02em;
  }

  .blog-post p {
    font-size: clamp(1rem, 2vw, 1.25rem);
    margin-bottom: 0.75rem;
    text-wrap: wrap;
  }

  .blog-post time {
    display: block;
    font-size: 0.95rem;
    margin-top: 0.5rem;
  }

  /* Body text */
  .blog-post article,
  .blog-post .astro-code,
  .blog-post .container {
    font-size: clamp(1rem, 1.2vw, 1.125rem);
  }

  /* Headings */
  .blog-post h2,
  .blog-post h3,
  .blog-post h4 {
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    font-weight: 600;
    line-height: 1.4;
  }

  .blog-post h2 {
    font-size: clamp(1.5rem, 3vw, 1.75rem);
  }

  .blog-post h3 {
    font-size: clamp(1.25rem, 2.5vw, 1.5rem);
  }

  /* Links */
  .blog-post a {
    color: var(--primary-color);
    text-decoration: none;
    border-bottom: 1px solid rgba(26, 137, 23, 0.2);
    transition: border-color 0.2s ease;
    word-break: break-word;
  }

  .blog-post a:hover {
    border-color: var(--primary-color);
  }

  /* Images */
  .blog-post img {
    display: block;
    border-radius: 8px;
    margin: 2rem auto;
    width: 100%;
    height: auto;
    object-fit: contain;
  }

  .fullscreen-image {
    width: 100vw;
    margin-left: 50%;
    transform: translateX(-50%);
    border-radius: 0;
  }

  /* Code blocks */
  .astro-code {
    border: 1px solid #333;
    border-radius: 6px;
    padding: 1rem 1.25rem;
    font-family: 'Courier New', monospace;
    overflow-x: auto;
    font-size: 0.95rem;
  }


  /* Blockquotes */
  blockquote {
    border-left: 4px solid #e6e6e6;
    padding-left: 1rem;
    margin: 2rem 0;
    font-style: italic;
    color: #555;
    background: #fafafa;
  }

  video {
    width: 100%;
  }

  img {
    margin: 0 !important;
    width: 100% !important;
  }

  /* Lists */
  ul, ol {
    margin: 0rem 0 0rem 1.5rem;
    font-size: 1.2rem;
  }

  li {
    margin-bottom: 0.5rem;
  }

  .button {
    color: white !important;
    border: solid transparent 2px !important;
  }

  .button:hover {
    border-color: var(--primary-color) !important;
    background-color: transparent !important;
    color: var(--primary-color) !important;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .blog-post {
      padding: 0 1rem;
      margin: 2rem auto;
    }

    .blog-post header {
      margin-bottom: 2rem;
    }

    .blog-post img {
      margin: 1.5rem 0;
    }

    .astro-code {
      padding: 0.75rem;
      font-size: 0.9rem;
    }

    blockquote {
      margin: 1.5rem 0;
      padding-left: 0.75rem;
    }
  }

  /* Ultra small screens (phones < 400px) */
  @media (max-width: 400px) {
    .blog-post h1 {
      font-size: 1.8rem;
    }

    .blog-post h2 {
      font-size: 1.3rem;
    }

    .blog-post p {
      font-size: 1rem;
    }
  }
</style>
